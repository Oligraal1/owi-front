<div *ngIf="task" class="d-flex justify-content-center align-items-center">
  <div class="card" >
    <div class="card-body">
      <h5 class="card-title">{{ task.name }}</h5>
      <p class="card-text mb-2 text-muted">Créée le {{ task.createdAt | date: 'short' }}</p>
      <div class="p-4 mb-2 tag" [style.background-color]="task.tag"></div>
      <div class='description' *ngIf="task.description">
        <h6 class="card-subtitle mb-2 text-muted fs-5">Description</h6>
        <p class="card-text">{{ task.description }}</p>
      </div>
      <p class="cart-text my-2">Fin de tâche prévue le : {{ task.deadline | date: 'dd/MM/yyyy' }}</p>
      <div>
        <hr />
        <h6>Commentaires</h6>
        <div *ngFor="let comment of task.comments" class="comment">
          <small class="text-muted">Posté par {{ comment.user }} le {{ comment.createdAt | date: 'short' }}</small>
          <p>{{ comment.content }}</p>
          <button *ngIf="comment.id !== undefined" (click)="deleteComment(comment.id)" class="btn btn-secondary">Supprimer</button>
        </div>
        <hr>
        <div class="container mt-5">
          <h5>Ajouter un nouveau commentaire</h5>
          <form [formGroup]="commentForm" (ngSubmit)="addComment()" class="needs-validation" novalidate>
            <div class="form-group">
              <label for="user">Votre nom</label>
              <input type="text" id="user" formControlName="user" class="form-control" placeholder="Entrez votre nom" required>
              <div class="invalid-feedback">
                Le nom est obligatoire.
              </div>
            </div>

            <div class="form-group">
              <label for="content">Votre commentaire</label>
              <textarea id="content" formControlName="content" class="form-control" placeholder="Ajouter un commentaire" rows="4" required></textarea>
              <div class="invalid-feedback">
                Le commentaire est obligatoire.
              </div>
            </div>

            <button type="submit" class="btn btn-primary" [disabled]="commentForm.invalid">Ajouter</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="!task" class="loader-container">
  <div class="loader"></div>
</div>
